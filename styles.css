/* Design tokens */
:root {
  /* primary accent (red) */
  --pink-600:#b94545; /* primary red accent */
  --pink-500:#c65a56;
  --pink-300:#f1ccc3;
  --rose-50:#fbf5ed;
  --gold:#d9b892;
  /* warm ink for readable text (deep brown) */
  --ink:#3b2e28;
  --ink-soft:#5b4339;
  --ring:rgba(185, 69, 69, .28);
  /* beige palette (75% of visual weight) */
  --beige-50: #f9f3e8; /* very light cream */
  --beige-100: #f3e3cc; /* light warm sand */
  --beige-200: #e5c8a2; /* medium sand */
  /* legacy sand variables (kept for backward refs) */
  --sand-50: var(--beige-50);
  --sand-100: var(--beige-100);
  --sand-200: var(--beige-200);
  --sand-300:#d9b892;
  --radius:12px;
  --shadow:0 10px 24px rgba(47,37,32,.12);
  --pink-soft:#d77a70;
  --rose-glow:rgba(185, 69, 69, .16);
  /* subtle glow colors */
  --glow-pink: 0 0 0 6px rgba(185, 69, 69, .16);
  --glow-gold: 0 0 32px rgba(217, 172, 135, .42);
  /* ease */
  --ease-out: cubic-bezier(.22,.61,.36,1);
}
/* Base */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--ink);
  background:
    /* soft red accents behind content */
    radial-gradient(1200px 800px at 12% 16%, rgba(185, 69, 69, .10), transparent 68%),
    radial-gradient(1000px 680px at 50% 92%, rgba(185, 69, 69, .08), transparent 72%),
    /* warm beige conic/light layering for depth */
    conic-gradient(from 210deg at 82% 0%, rgba(243, 227, 210, .65), rgba(249,243,232,.95) 35%, rgba(243, 227, 210, .55) 70%, rgba(249,243,232,.90)),
    linear-gradient(140deg, rgba(185, 69, 69, .06), transparent 55%),
    linear-gradient(180deg, var(--beige-50), var(--beige-100));
  background-color: var(--beige-100);
  animation: bg-drift 18s var(--ease-out) infinite alternate;
}
@keyframes bg-drift {
  0% { background-position: 0 0, 0 0, 0% 0%, 0 0; }
  100% { background-position: 0 0, 0 0, 100% 60%, 0 0; }
}
.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px;
  margin: -1px; padding: 0; border: 0;
  clip: rect(0 0 0 0); clip-path: inset(50%);
  overflow: hidden; white-space: nowrap;
}
/* Header / Nav */
.site-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 18px; gap: 12px;
  position: sticky; top: 0; z-index: 20;
  background: linear-gradient(180deg, rgba(249,243,232,.94), rgba(243, 227, 210,.88)), linear-gradient(120deg, rgba(215, 122, 112, .18), rgba(249,243,232,0) 62%);
  backdrop-filter: saturate(1.2) blur(10px);
  border-bottom: 1px solid rgba(185,69,69,.10);
  box-shadow: 0 2px 24px rgba(47,37,32,.06);
}
.site-header::after { content:""; position:absolute; left:0; right:0; bottom:0; height: 1px; pointer-events:none; background: linear-gradient(90deg, rgba(185,69,69,.0), rgba(185,69,69,.35), rgba(217,172,135,.35), rgba(185,69,69,.35), rgba(185,69,69,.0)); }
.brand { display: inline-flex; align-items: center; gap: 8px; font-weight: 600; }
.brand .monogram { color: var(--pink-600); filter: drop-shadow(0 2px 6px rgba(185,69,69,.18)); }
.brand-text { letter-spacing: .2px; background: linear-gradient(92deg, #a33a3a, #b94545 45%, #d9b892 95%); -webkit-background-clip: text; background-clip: text; color: transparent; text-shadow: 0 1px 0 rgba(249,243,232,.6); }
.site-nav { position: relative; }
.site-nav #nav { list-style: none; display: flex; gap: 10px; margin: 0; padding: 0; }
.site-nav a { text-decoration: none; color: var(--ink); opacity: .92; transition: color .2s var(--ease-out), box-shadow .25s var(--ease-out), background-color .25s var(--ease-out), transform .15s var(--ease-out); padding: 8px 12px; border-radius: 999px; }
.site-nav a:hover { color: var(--pink-600); background: rgba(215, 122, 112, .15); box-shadow: 0 6px 20px rgba(185, 69, 69, .18), inset 0 0 0 1px rgba(185,69,69,.28); transform: translateY(-1px); }
.site-nav a:focus-visible { outline: none; color: var(--pink-600); box-shadow: 0 0 0 3px var(--ring), 0 6px 22px rgba(185,69,69,.22); background: rgba(215,122,112,.14); }
.nav-toggle { display: none; }
@media (max-width: 700px) {
  .nav-toggle {
    display: inline-flex; align-items: center; justify-content: center;
    padding: 8px 12px; border-radius: 999px; border: 1px solid rgba(0,0,0,.08);
    background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); box-shadow: var(--shadow); cursor: pointer;
    gap: 8px; color: var(--ink);
  }
  .nav-toggle:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--ring); }
  .site-nav #nav {
    display: none;
    position: absolute; right: 0; top: calc(100% + 10px);
  background: linear-gradient(180deg, rgba(249,243,232,.98), rgba(243,227,210,.98)); box-shadow: 0 18px 40px rgba(0,0,0,.08), 0 0 0 1px rgba(0,0,0,.02);
    border-radius: 14px; padding: 10px 10px; min-width: 180px;
    flex-direction: column; gap: 6px;
  }
  .site-nav #nav[data-open="true"] { display: flex; }
}
/* Hero */
#hero::before {
  content:"";
  position:absolute;
  inset: 12% 18% auto;
  height: 60%;
  border-radius: 24px;
  background: radial-gradient(circle at 30% 30%, rgba(215, 122, 112, .18), rgba(255,255,255,0));
  filter: blur(0.5px);
  opacity: .8;
  pointer-events: none;
}
#hero { text-align: center; padding: 64px 18px 36px; position: relative; }
.hero-title { font-size: clamp(28px, 5vw, 44px); margin: 0 0 8px; 
  background: linear-gradient(92deg, #a33a3a 0%, #b94545 35%, #d9b892 85%);
  -webkit-background-clip: text; background-clip: text; color: transparent;
  text-shadow: 0 1px 0 rgba(249,243,232,.6);
}
.shimmer-name { position: relative; white-space: nowrap; color: transparent; background: linear-gradient(96deg, #a33a3a 0%, #b94545 40%, #d9b892 90%); -webkit-background-clip: text; background-clip: text; text-shadow: 0 1px 0 rgba(249,243,232,.6); }
/* subtle sweep every ~12s and on hover/focus */
.shimmer-name::after {
  content:""; position:absolute; inset:-2px; border-radius: 4px;
  background: linear-gradient(120deg, rgba(255,255,255,0) 20%, rgba(242, 204, 173, .65) 50%, rgba(255,255,255,0) 80%);
  mix-blend-mode: screen; transform: translateX(-140%) rotate(8deg);
  animation: shimmer-sweep 12s var(--ease-out) infinite;
  pointer-events: none;
}
.shimmer-name:focus-visible::after, .shimmer-name:hover::after { animation: shimmer-sweep-hover 0.9s var(--ease-out) 1; }
@keyframes shimmer-sweep { 0%, 92% { transform: translateX(-140%) rotate(8deg); opacity: 0; } 100% { transform: translateX(140%) rotate(8deg); opacity: .9; } }
@keyframes shimmer-sweep-hover { 0% { transform: translateX(-140%) rotate(8deg); opacity: 0; } 100% { transform: translateX(140%) rotate(8deg); opacity: .9; } }
.hero-tag { margin: 0 auto 18px; max-width: 48ch; color: var(--ink-soft); }
.hero-actions { display: inline-flex; gap: 12px; margin-top: 10px; }
/* Buttons & chips */
.btn {
  --raise: translateY(-2px);
  display: inline-block; padding: 10px 16px; border-radius: 12px;
  text-decoration: none; border: 1px solid rgba(0,0,0,.06);
  color: var(--ink); background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); box-shadow: var(--shadow);
  transition: transform .15s var(--ease-out), box-shadow .2s var(--ease-out), filter .2s var(--ease-out);
  position: relative; overflow: hidden;
}
.btn.primary {
  color: #fff;
  background: linear-gradient(180deg, #cd5c53, var(--pink-600));
  border-color: rgba(185,69,69,.45);
  box-shadow: var(--shadow), inset 0 1px 0 rgba(249,243,232,.18);
}
.btn.ghost {
  background: rgba(243, 227, 210, .65);
  border-color: rgba(185,69,69,.32);
  color: var(--pink-600);
}
.btn:hover { transform: var(--raise); box-shadow: var(--shadow), var(--glow-gold); }
.btn:active { transform: translateY(0); }
.btn.primary:hover { filter: brightness(1.05); }
.btn.primary:active { filter: brightness(0.94); }
.btn.ghost:hover { background: rgba(245, 232, 220, .92); color: var(--pink-600); box-shadow: var(--shadow), 0 0 0 1px rgba(185,69,69,.28); }
.btn:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--ring), var(--shadow), var(--glow-pink); }
/* subtle sheen on hover */
.btn::after { content:""; position:absolute; inset:0; background: linear-gradient(120deg, transparent 20%, rgba(249,243,232,.65) 50%, transparent 80%); transform: translateX(-120%); transition: transform .6s var(--ease-out); pointer-events:none; }
.btn:hover::after { transform: translateX(120%); }
.chip {
  display: inline-flex; align-items: center; justify-content: center;
  background: rgba(249,243,232,.92); border: 1px solid rgba(185,69,69,.18); border-radius: 999px;
  padding: 6px 12px; font-size: 14px; color: var(--ink-soft);
  box-shadow: 0 4px 14px rgba(185, 69, 69, .14);
  position: relative; isolation: isolate;
}
.chip::before {
  content:"";
  position:absolute;
  inset: -6px;
  border-radius: inherit;
  border: 1px solid rgba(185,69,69,.18);
  opacity: .4;
  pointer-events: none;
}
/* micro pulse for countdown */
#countdown, #lock-countdown { animation: chip-pulse 2.6s ease-in-out infinite; }
@keyframes chip-pulse {
  0%, 100% { box-shadow: 0 4px 10px rgba(0,0,0,.06), 0 0 0 0 rgba(185, 69, 69, 0.0); }
  50% { box-shadow: 0 4px 14px rgba(0,0,0,.08), 0 0 0 8px rgba(185, 69, 69, .10); }
}
/* Letter */
#letter { padding: 36px 18px; display: grid; place-items: center; }
.letter-card { background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); border: 1px solid rgba(185,69,69,.18); border-radius: var(--radius); padding: 22px; box-shadow: var(--shadow), 0 18px 36px rgba(185,69,69,.12); max-width: 720px; width: 100%; text-align: center; position: relative; overflow: hidden; }
.letter-card::before { content: ""; position:absolute; inset: -1px; border-radius: inherit; pointer-events:none; background: radial-gradient(60% 40% at 50% 0%, rgba(185,69,69,.10), transparent 70%); }
/* subtle vignette at bottom edges */
.letter-card::after { content:""; position:absolute; inset: 0; pointer-events:none; background: radial-gradient(120% 60% at 50% 110%, rgba(0,0,0,.04), transparent 60%); }
.heart {
  width: 76px; height: 76px; border-radius: 50%;
  display: inline-grid; place-items: center; font-size: 28px; line-height: 1;
  border: 1px solid rgba(0,0,0,.06);
  color: #8a2e2e; background: radial-gradient(circle at 30% 30%, #f7d9cf, var(--beige-50) 65%);
  box-shadow: var(--shadow); cursor: pointer; user-select: none; position: relative;
  transition: transform .15s var(--ease-out), box-shadow .2s var(--ease-out);
  animation: heart-beat 1.9s ease-in-out infinite;
}
.heart::after {
  content: ""; position: absolute; inset: -6px; border-radius: 50%;
  border: 2px solid var(--pink-300); opacity: 0; pointer-events: none;
  animation: heart-ping 1.6s ease-out infinite;
}
.heart.opened::after { display: none; }
@keyframes heart-ping { 0% { transform: scale(.9); opacity: .0; } 50% { opacity: .6; } 100% { transform: scale(1.3); opacity: 0; } }
.heart:hover { transform: translateY(-2px); box-shadow: var(--shadow), var(--glow-gold); }
.heart:active { transform: translateY(0); }
.heart:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--ring), var(--shadow); }
@keyframes heart-beat { 0%, 100% { transform: scale(1); } 30% { transform: scale(1.04); } 60% { transform: scale(0.995); } }
/* stop idle animation once opened */
.heart.opened { animation: none; }
#letterBody {
  margin-top: 18px;
  text-align: left;
  color: var(--ink-soft);
  position: relative;
  border-radius: calc(var(--radius) - 4px);
  border: 1px solid rgba(185,69,69,.14);
  box-shadow: inset 0 1px 0 rgba(249,243,232,.6), inset 0 -1px 0 rgba(0,0,0,.02);
  padding: 22px 20px;
  background:
    repeating-linear-gradient(180deg, rgba(0,0,0,0) 0 28px, rgba(0,0,0,.03) 29px, rgba(0,0,0,0) 30px),
    radial-gradient(120% 80% at 50% 0%, rgba(240, 212, 194, .22), rgba(249,243,232,.78) 40%, var(--beige-50) 72%);
}
/* light paper grain */
#letterBody::before { content:""; position:absolute; inset:0; pointer-events:none; opacity:.35; mix-blend-mode:multiply; background:
  repeating-conic-gradient(from 0deg at 50% 50%, rgba(0,0,0,.010) 0 6deg, rgba(0,0,0,0) 6deg 12deg);
}
#letterBody p { margin: 0 0 12px; }
.type-area { white-space: pre-wrap; line-height: 1.8; font-size: 17px; color: #412e29; letter-spacing: .08px; font-family: 'Spectral', Georgia, 'Times New Roman', Times, ui-serif, serif; text-rendering: optimizeLegibility; font-feature-settings: 'liga' 1, 'calt' 1; -webkit-font-smoothing: antialiased; }
/* subtle baseline wobble illusion via layered shadows */
.type-area { text-shadow: 0 .15px 0 rgba(0,0,0,.4), 0 .35px .3px rgba(0,0,0,.06); }
/* ink reveal when first shown */
.type-area.ink-appear { animation: ink-fresh 600ms var(--ease-out) 1; }
@keyframes ink-fresh { from { filter: saturate(0.96) contrast(0.98); opacity: .85; } to { filter: saturate(1.04) contrast(1.02); opacity: 1; } }
.type-area::selection { background: rgba(217, 172, 135, .25); }
/* a gentle drop cap for the very first letter */
.type-area:first-letter { float: left; font-size: 1.6em; line-height: 1; padding-right: .15em; padding-top: .12em; font-weight: 600; color: #3a2925; }
/* Story (cat dialogue) */
#story { padding: 36px 18px; }
.story-card { max-width: 920px; margin: 0 auto; display: grid; grid-template-columns: 240px 1fr; gap: 18px; align-items: center; background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); border: 1px solid rgba(0,0,0,.04); border-radius: 16px; box-shadow: var(--shadow); position: relative; overflow: hidden; }
.story-card::before { content:""; position:absolute; inset: -1px; border-radius: inherit; pointer-events:none; background: radial-gradient(70% 40% at 50% 0%, rgba(185,69,69,.08), transparent 72%); }
.story-portrait { margin: 0; padding: 12px; display: grid; place-items: center; }
.story-portrait img { width: 100%; height: auto; border-radius: 14px; box-shadow: 0 10px 30px rgba(0,0,0,.08); background: var(--beige-50); }
.story-bubble { position: relative; margin: 12px 12px 12px 0; padding: 16px 16px 56px; border-radius: 14px; border: 1px solid rgba(0,0,0,.04); background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); box-shadow: inset 0 1px 0 rgba(249,243,232,.06); }
.story-bubble::after { content:""; position:absolute; left: -10px; top: 32px; width: 16px; height: 16px; background: inherit; border: inherit; transform: rotate(45deg); box-shadow: -1px -1px 0 rgba(0,0,0,.04); }
.story-text { min-height: 4lh; font-size: 16px; line-height: 1.75; color: var(--ink); }
.story-next { position: absolute; right: 14px; bottom: 12px; }
.story-hint { position: absolute; left: 16px; bottom: 16px; font-size: 13px; color: var(--ink-soft); opacity: .85; }
@media (max-width: 720px) {
  .story-card { grid-template-columns: 1fr; }
  .story-bubble { margin: 0 12px 12px; }
  .story-bubble::after { left: 24px; top: -8px; transform: rotate(45deg); }
  .story-next { right: 12px; bottom: 10px; }
}
.hold-hint { margin-top: 10px; font-size: 14px; color: var(--ink-soft); }
/* Gallery */
#gallery { padding: 36px 18px 64px; }
.gallery-frame {
  max-width: 820px; margin: 0 auto; display: grid; grid-template-columns: 48px 1fr 48px; gap: 10px; align-items: center;
}
.gallery-frame figure { margin: 0; background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); border: 1px solid rgba(185,69,69,.18); border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow), 0 18px 36px rgba(185,69,69,.12); position: relative; }
.gallery-frame img { width: 100%; height: auto; display: block; aspect-ratio: 4 / 3; object-fit: cover; background: var(--beige-50); }
.gallery-frame figcaption { text-align: center; font-size: 14px; color: var(--ink-soft); padding: 8px; }
.icon-btn {
  width: 44px; height: 44px; border-radius: 10px; border: 1px solid rgba(0,0,0,.08);
  background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); box-shadow: var(--shadow); cursor: pointer; display: inline-grid; place-items: center; font-size: 20px;
  position: relative; overflow: hidden; transition: transform .15s var(--ease-out), box-shadow .2s var(--ease-out), background-color .2s var(--ease-out);
}
.icon-btn:hover { transform: translateY(-2px) scale(1.03); box-shadow: var(--shadow), var(--glow-pink); }
.icon-btn:active { transform: translateY(0) scale(0.98); }
.icon-btn:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--ring), var(--shadow), var(--glow-pink); }
.icon-btn::after { content:""; position:absolute; inset:0; background: radial-gradient(120% 60% at 50% -10%, rgba(249,243,232,.7), transparent 60%); opacity: 0; transition: opacity .3s var(--ease-out); pointer-events:none; }
.icon-btn:hover::after { opacity: .9; }
/* Small screens: overlay arrows on image for better space */
@media (max-width: 600px) {
  .gallery-frame { grid-template-columns: 1fr; position: relative; }
  .gallery-frame figure { grid-column: 1 / -1; }
  .icon-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(249,243,232,.85); backdrop-filter: blur(6px) saturate(1.2); }
  .icon-btn:hover { transform: translateY(calc(-50% - 2px)) scale(1.03); }
  .icon-btn:active { transform: translateY(-50%) scale(0.98); }
  #prevPhoto { left: 8px; }
  #nextPhoto { right: 8px; }
}
/* Footer */
.site-footer { text-align: center; color: var(--ink-soft); padding: 32px 16px 48px; }
/* Constellation overlay */
.constellation-overlay {
  position: fixed;
  inset: 0;
  z-index: 70;
  display: grid;
  place-items: center;
  background: radial-gradient(120% 120% at 50% 20%, rgba(18, 12, 10, .92), rgba(6, 4, 4, .96));
  backdrop-filter: blur(8px) saturate(1.1);
  opacity: 0;
  pointer-events: none;
  transition: opacity .6s var(--ease-out);
}
.constellation-overlay.is-open {
  opacity: 1;
  pointer-events: auto;
}
.constellation-overlay.is-fading {
  opacity: 0;
}
.constellation-sky {
  position: relative;
  width: min(640px, 90vw);
  height: min(480px, 82vh);
  border-radius: 28px;
  background: radial-gradient(140% 120% at 50% 0%, rgba(24, 16, 14, .98), rgba(14, 8, 8, .98));
  border: 1px solid rgba(249,243,232,.12);
  box-shadow: 0 48px 120px rgba(0,0,0,.55), inset 0 1px 0 rgba(249,243,232,.12);
  overflow: hidden;
}
.constellation-stars {
  position: absolute;
  inset: 0;
}
.constellation-stars .star {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: rgba(249,243,232,.9);
  box-shadow: 0 0 10px rgba(249,243,232,.6);
  animation: star-twinkle 2.8s ease-in-out infinite alternate;
}
.constellation-stars .star:nth-child(odd) { animation-duration: 3.4s; }
.constellation-stars .star-1 { top: 12%; left: 18%; }
.constellation-stars .star-2 { top: 26%; left: 12%; }
.constellation-stars .star-3 { top: 42%; left: 22%; }
.constellation-stars .star-4 { top: 18%; left: 42%; }
.constellation-stars .star-5 { top: 32%; left: 46%; }
.constellation-stars .star-6 { top: 54%; left: 40%; }
.constellation-stars .star-7 { top: 16%; left: 68%; }
.constellation-stars .star-8 { top: 28%; left: 74%; }
.constellation-stars .star-9 { top: 44%; left: 68%; }
.constellation-stars .star-10 { top: 58%; left: 76%; }
.constellation-stars .star-11 { top: 72%; left: 60%; }
.constellation-stars .star-12 { top: 70%; left: 32%; }
.constellation-lines {
  position: absolute;
  inset: 52px 44px 60px;
  fill: none;
  stroke: rgba(249,243,232,.6);
  stroke-width: 2.4;
  stroke-linecap: round;
  stroke-linejoin: round;
  opacity: 0;
}
.constellation-overlay.is-open .constellation-lines { opacity: 1; }
.constellation-lines .path-two,
.constellation-lines .path-four {
  stroke-dasharray: 420;
  stroke-dashoffset: 420;
}
.constellation-overlay.is-open .constellation-lines .path-two {
  animation: constellation-draw 3s var(--ease-out) forwards .35s;
}
.constellation-overlay.is-open .constellation-lines .path-four {
  animation: constellation-draw 3s var(--ease-out) forwards .8s;
}
.constellation-sparkles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}
.constellation-sparkles .sparkle {
  position: absolute;
  width: 6px;
  height: 14px;
  border-radius: 999px;
  background: radial-gradient(circle at 50% 10%, rgba(249,243,232,.9), rgba(217, 172, 135, .85), transparent 75%);
  opacity: 0;
  animation: sparkle-fall 3.4s linear forwards;
}
.constellation-text {
  position: absolute;
  bottom: 32px;
  left: 50%;
  transform: translateX(-50%);
  font-size: clamp(64px, 12vw, 104px);
  letter-spacing: 10px;
  font-weight: 600;
  color: rgba(255, 235, 200, .18);
  text-shadow: 0 0 26px rgba(217, 172, 135, .3);
  pointer-events: none;
}
@keyframes star-twinkle {
  0% { opacity: .45; transform: scale(.9); }
  50% { opacity: 1; transform: scale(1.1); }
  100% { opacity: .55; transform: scale(.96); }
}
@keyframes constellation-draw {
  to { stroke-dashoffset: 0; }
}
@keyframes sparkle-fall {
  0% { transform: translateY(-12%); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translateY(120%); opacity: 0; }
}
/* Lock overlay */
#lockout[hidden] { display: none; }
#lockout {
  position: fixed; inset: 0; z-index: 50;
  display: grid; place-items: center; padding: 20px;
  background:
    radial-gradient(1000px 700px at 20% 10%, rgba(240, 212, 194, .35), transparent 60%),
    radial-gradient(900px 600px at 80% 15%, rgba(245, 226, 213, .35), transparent 60%),
    linear-gradient(180deg, var(--rose-50), #fff); /* fully opaque to conceal content */
}
/* Prelude overlay (cake -> gift) */
#prelude[hidden] { display: none; }
#prelude {
  position: fixed; inset: 0; z-index: 45;
  display: grid; place-items: center; padding: 24px;
  background:
    radial-gradient(1000px 700px at 20% 10%, rgba(240, 212, 194, .35), transparent 60%),
    radial-gradient(900px 600px at 80% 15%, rgba(245, 226, 213, .35), transparent 60%),
    linear-gradient(180deg, var(--rose-50), #fff);
}
.stage { text-align: center; max-width: 760px; width: 100%; background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); border: 1px solid rgba(0,0,0,.04); border-radius: 16px; box-shadow: var(--shadow); padding: 10px 22px; position: relative; }
.stage::before { content:""; position:absolute; inset: -1px; border-radius: inherit; pointer-events:none; background: radial-gradient(60% 40% at 50% 0%, rgba(185,69,69,.10), transparent 70%); }
.stage h2 { margin: 0 0 8px; font-size: clamp(22px, 4.2vw, 30px); }
.stage p { margin: 4px 0 16px; color: var(--ink-soft); }
/* Balloon mini-game */
.balloon-game {
  max-width: 880px;
  width: min(92vw, 880px);
  min-height: clamp(420px, 70vh, 560px);
  display: flex;
  flex-direction: column;
  gap: 18px;
  align-items: stretch;
}
.stage::after {
  content:"";
  position:absolute;
  inset: 6px;
  border-radius: inherit;
  background: radial-gradient(circle at 20% 20%, rgba(215, 122, 112, .12), transparent 60%);
  opacity: .9;
  pointer-events: none;
}
.balloon-game[hidden] { display: none !important; }
.balloon-ui {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 12px;
  justify-content: space-between;
}
.balloon-counter {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  border-radius: 999px;
  font-weight: 600;
  color: var(--pink-600);
  background: rgba(217, 172, 135, .18);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.8);
}
#balloonSkip {
  margin-left: auto;
  transition: transform .15s var(--ease-out);
}
#balloonSkip[hidden] { display: none !important; }
.balloon-message {
  min-height: 26px;
  padding: 10px 14px;
  border-radius: 12px;
  background: rgba(249,243,232,.78);
  border: 1px solid rgba(0,0,0,.05);
  box-shadow: inset 0 1px 0 rgba(249,243,232,.8), 0 18px 32px rgba(0,0,0,.08);
  font-size: 15px;
  color: var(--ink-soft);
}
.balloon-message[hidden] { display: none !important; }
.balloon-field {
  position: relative;
  flex: 1;
  width: 100%;
  min-height: 320px;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(0,0,0,.06);
  background:
    radial-gradient(160% 120% at 50% 120%, rgba(251, 245, 237, .96), rgba(245, 226, 213, .78)),
    linear-gradient(180deg, rgba(47,37,32,.08), transparent 55%);
  box-shadow: inset 0 1px 0 rgba(249,243,232,.7), 0 24px 48px rgba(0,0,0,.12);
}
.balloon-field::after {
  content:"";
  position:absolute;
  inset:0;
  background-image: radial-gradient(2px 2px at 18% 24%, rgba(249,243,232,.25), transparent 46%), radial-gradient(2px 2px at 82% 36%, rgba(249,243,232,.18), transparent 42%);
  opacity: .35;
  pointer-events: none;
}
.balloon-field button {
  background: none;
  border: 0;
  padding: 0;
}
.balloon {
  position: absolute;
  bottom: -120px;
  left: 50%;
  width: 84px;
  height: 104px;
  border-radius: 52% 52% 46% 46%;
  background: radial-gradient(circle at 30% 28%, rgba(249,243,232,.85), rgba(249, 220, 210, .92), rgba(236, 183, 173, 1));
  box-shadow: 0 18px 28px rgba(0,0,0,.16);
  cursor: pointer;
  transform: translate(-50%, 0) scale(1);
  animation: balloon-rise var(--rise-duration, 13s) linear forwards;
  display: flex;
  align-items: center;
  justify-content: center;
  will-change: transform;
}
.balloon::before {
  content:"";
  position:absolute;
  top:24%; left:32%;
  width: 12px; height: 24px;
  border-radius: 999px;
  background: rgba(249,243,232,.75);
}
.balloon::after {
  content:"";
  position:absolute;
  bottom: -44px;
  left: 50%;
  width: 2px;
  height: 48px;
  transform: translateX(-50%);
  background: rgba(90, 67, 57, .28);
}
.balloon:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px var(--ring), 0 18px 28px rgba(0,0,0,.16);
}
.balloon.gold {
  background: radial-gradient(circle at 32% 26%, rgba(249,243,232,.92), rgba(240, 222, 184, .95), rgba(217, 172, 135, 1));
  box-shadow: 0 22px 34px rgba(217, 172, 135, .35);
}
.balloon.gold::before {
  background: rgba(249,243,232,.82);
}
.balloon.gold::after {
  background: rgba(185, 138, 92, .32);
}
.balloon.popping {
  animation: balloon-pop 280ms ease-out forwards;
  pointer-events: none;
}
.balloon.popped {
  pointer-events: none;
}
.balloon-sparkle {
  position: absolute;
  width: 8px; height: 8px;
  transform: translate(-50%, -50%);
  pointer-events: none;
  border-radius: 50%;
  background: rgba(249,243,232,.92);
  opacity: 0;
  animation: balloon-sparkle 420ms ease-out forwards;
}
.balloon-sparkle.gold { background: rgba(217, 172, 135, .92); }
.balloon-game.success .balloon-field {
  box-shadow: inset 0 1px 0 rgba(249,243,232,.8), 0 32px 54px rgba(185, 138, 92, .25);
}
.balloon-game.success .balloon-message {
  background: rgba(249,243,232,.92);
  color: var(--pink-600);
  font-weight: 600;
}
@keyframes balloon-rise {
  0% { transform: translate(-50%, 0) scale(1); }
  25% { transform: translate(calc(-50% + (var(--drift, 18px) * 0.5)), -30%) scale(1.03); }
  50% { transform: translate(calc(-50% - (var(--drift, 18px) * 0.4)), -60%) scale(0.99); }
  75% { transform: translate(calc(-50% + (var(--drift, 18px) * 0.3)), -92%) scale(1.02); }
  100% { transform: translate(-50%, -120%) scale(1.05); }
}
@keyframes balloon-pop {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(1.28); opacity: 0; }
}
@keyframes balloon-sparkle {
  0% { transform: translate(-50%, -10%) scale(0.4); opacity: 0; }
  30% { opacity: 1; }
  100% { transform: translate(-50%, -160%) scale(0.1); opacity: 0; }
}
/* Cake */
.cake {
  position: relative;
  width: min(400px, 78vw);
  margin: 4px auto 12px;
  display: grid;
  place-items: center;
}
.cake-display {
  position: relative;
  width: min(400px, 78vw);
  height: auto;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  isolation: isolate;
  align-items: center;
}
.cake-display::after {
  content:"";
  position: absolute;
  inset: auto 14%;
  bottom: 20px;
  height: 20px;
  border-radius: 999px;
  background: radial-gradient(circle, rgba(185, 69, 69, .16), rgba(185, 69, 69, 0));
  opacity: .4;
  pointer-events: none;
}
.cake-svg {
  width: 100%;
  max-width: 400px;
  height: auto;
  max-height: 100%;
  filter: drop-shadow(0 18px 36px rgba(47,37,32,.18));
}
.velas {
  background: rgba(249,243,232,.95);
  border-radius: 10px;
  position: absolute;
  bottom: 18%;
  left: 33%;
  width: 5px;
  height: 36px;
  transform: translate(-50%, -140px);
  backface-visibility: hidden;
  box-shadow: 0 8px 16px rgba(47,37,32,.18);
  animation: candle-drop 600ms ease-out 0.45s forwards;
}
.velas::after,
.velas::before {
  content:"";
  position: absolute;
  width: 100%;
  height: 2px;
  background: rgba(215, 122, 112, .35);
}
.velas::after { top: 24%; }
.velas::before { top: 46%; }
.fuego {
  border-radius: 50%;
  position: absolute;
  top: -20px;
  left: 50%;
  width: 7px;
  height: 18px;
  margin-left: -3.5px;
  background: rgba(254, 248, 97, .6);
  box-shadow: 0 0 36px 14px rgba(255, 232, 186, .32);
}
.fuego:nth-child(1) { animation: fuego 2s 0.9s infinite; }
.fuego:nth-child(2) { animation: fuego 1.6s 0.9s infinite; }
.fuego:nth-child(3) { animation: fuego 1.2s 0.9s infinite; }
.fuego:nth-child(4) { animation: fuego 0.8s 0.9s infinite; }
.fuego:nth-child(5) { animation: fuego 0.5s 0.9s infinite; }
.cake-message {
  margin-top: 16px;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--pink-600);
  opacity: 0;
  transform: translateY(16px);
  transition: opacity .45s var(--ease-out), transform .45s var(--ease-out);
}
.cake-message h1 {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
}
.cake-message p {
  margin: 4px 0 0;
  font-size: 0.9rem;
  letter-spacing: 3px;
  color: var(--ink-soft);
}
#cakeStage.blown .fuego {
  animation: none;
  opacity: 0;
  transition: opacity .35s ease-out;
}
#cakeStage.blown .cake-message,
#cakeStage.cut .cake-message {
  opacity: 1;
  transform: translateY(0);
}
#cakeStage.blown .velas {
  box-shadow: 0 4px 10px rgba(47,37,32,.1);
}
@keyframes candle-drop {
  to { transform: translate(-50%, 0); }
}
@keyframes fuego {
  0%, 100% {
    background: rgba(254, 248, 97, .55);
    box-shadow: 0 0 32px 12px rgba(255, 232, 186, .26);
    transform: translateY(0) scale(1);
  }
  50% {
    background: rgba(255, 82, 47, .18);
    box-shadow: 0 0 46px 18px rgba(255, 232, 186, .32);
    transform: translateY(-16px) scale(0.76);
  }
}
/* Gift (image-based) */
.gift { position: relative; width: min(360px, 80vw); height: min(280px, 62vw); margin: 10px auto; cursor: pointer; background: center / contain no-repeat url('Pictures/Gift_Closed.png'); }
.gift > * { display: none !important; }
.gift:focus-visible { outline: none; box-shadow: 0 0 0 4px var(--ring), var(--glow-pink); border-radius: 12px; }
.gift:hover { transform: translateY(-2px); }
.gift.open { background-image: url('Pictures/Gift_Open.png'); }
.gift.view { background-image: url('Pictures/Gift_View.png'); }
@keyframes lid-bounce { 0% { transform: translateX(-50%) translateY(-10%) rotateX(5deg); } 60% { transform: translateX(-50%) translateY(-42%) rotateX(60deg); } 100% { transform: translateX(-50%) translateY(-40%) rotateX(55deg); } }
/* Bow */
.bow { position:absolute; top: 6%; left:50%; transform: translateX(-50%); width: 120px; height: 80px; pointer-events:none; }
.bow .knot { position:absolute; left:50%; top:40%; transform: translate(-50%,-50%); width: 18px; height: 18px; border-radius: 6px; background: linear-gradient(180deg, #c65a56, #b94545); box-shadow: 0 4px 8px rgba(0,0,0,.08); }
.bow .loop { position:absolute; top: 22px; width: 60px; height: 40px; border-radius: 50% 50% 40% 40%; background: radial-gradient(80% 60% at 50% 40%, rgba(249,243,232,.45), rgba(249,243,232,0) 60%), linear-gradient(180deg, #c65a56, #b94545); box-shadow: inset 0 -6px 10px rgba(0,0,0,.08); }
.bow .loop.l { right: 50%; transform: translateX(-6px) rotate(-8deg); }
.bow .loop.r { left: 50%; transform: translateX(6px) rotate(8deg); }
.bow .tail { position:absolute; top: 52px; width: 16px; height: 46px; border-radius: 10px; background: linear-gradient(180deg, #c65a56, #b94545); box-shadow: inset 0 -6px 10px rgba(0,0,0,.08); }
.bow .tail.l { right: 52%; transform: rotate(-10deg); }
.bow .tail.r { left: 52%; transform: rotate(10deg); }
.gift.open .bow .loop.l { animation: bow-pop-l .6s ease-out; }
.gift.open .bow .loop.r { animation: bow-pop-r .6s ease-out; }
@keyframes bow-pop-l { 0%{ transform: translateX(-6px) rotate(-8deg) scale(.9);} 70%{ transform: translateX(-6px) rotate(-2deg) scale(1.05);} 100%{ transform: translateX(-6px) rotate(-8deg) scale(1);} }
@keyframes bow-pop-r { 0%{ transform: translateX(6px) rotate(8deg) scale(.9);} 70%{ transform: translateX(6px) rotate(2deg) scale(1.05);} 100%{ transform: translateX(6px) rotate(8deg) scale(1);} }
.lock-card {
  background: linear-gradient(180deg, var(--beige-50), var(--beige-100)); border: 1px solid rgba(0,0,0,.04); border-radius: 16px; box-shadow: var(--shadow);
  max-width: 560px; width: 100%; text-align: center; padding: 26px 20px; color: var(--ink);
  position: relative; overflow: hidden;
}
.lock-card::before { content:""; position:absolute; inset:0; pointer-events:none; background: radial-gradient(80% 50% at 50% 0%, rgba(185,69,69,.10), transparent 70%); }
.lock-card h2 { margin: 0 0 6px; font-size: clamp(22px, 4vw, 28px); }
.lock-card p { margin: 6px 0 12px; color: var(--ink-soft); }
.lock-card .chip { margin: 6px auto 8px; }
.soft-note { font-size: 14px; opacity: .85; }
/* Cat companion */
.cat-companion {
  position: fixed;
  left: 24px;
  bottom: 24px;
  z-index: 64;
  display: flex;
  align-items: flex-end;
  gap: 14px;
  opacity: 0;
  transform: translateY(16px);
  pointer-events: none;
  transition: opacity .28s var(--ease-out), transform .28s var(--ease-out);
}
.cat-companion.shown {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}
.cat-companion__avatar {
  width: 92px;
  height: 92px;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 30%, rgba(249,243,232,.95), rgba(251, 229, 214, .92));
  box-shadow: 0 18px 28px rgba(0,0,0,.14), inset 0 1px 0 rgba(255,255,255,.6);
  display: grid;
  place-items: center;
}
.cat-companion__avatar img {
  width: 74px;
  height: 74px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 6px 16px rgba(0,0,0,.12);
}
.cat-companion__bubble {
  position: relative;
  max-width: clamp(200px, 40vw, 260px);
  padding: 12px 16px;
  border-radius: 14px;
  background: linear-gradient(180deg, var(--beige-50), var(--beige-100));
  border: 1px solid rgba(0,0,0,.04);
  box-shadow: var(--shadow);
  font-size: 14px;
  color: var(--ink);
}
.cat-companion__bubble::after {
  content:"";
  position: absolute;
  bottom: -10px;
  left: 28px;
  width: 16px;
  height: 16px;
  transform: rotate(45deg);
  background: linear-gradient(180deg, var(--beige-50), var(--beige-100));
  border: 1px solid rgba(0,0,0,.04);
  border-left: none;
  border-top: none;
}
@media (max-width: 720px) {
  .cat-companion {
    left: 16px;
    right: 16px;
    bottom: 16px;
    gap: 10px;
  }
  .cat-companion__avatar {
    width: 72px;
    height: 72px;
  }
  .cat-companion__avatar img {
    width: 58px;
    height: 58px;
  }
  .cat-companion__bubble {
    max-width: min(260px, 70vw);
  }
}
/* Confetti */
.confetti-piece {
  position: fixed; top: 0; left: 0; width: 8px; height: 12px; border-radius: 2px;
  pointer-events: none; opacity: .95; z-index: 60;
  transform: translate(var(--x, 0px), var(--y, 0px)) rotate(0deg);
  animation: confetti-fall var(--dur, 1200ms) linear forwards;
}
@keyframes confetti-fall {
  to { transform: translate(var(--x, 0px), 120vh) rotate(720deg); opacity: 0.9; }
}
/* (Final Surprise overlay removed) */
/* Motion preference */
@media (prefers-reduced-motion: reduce) {
  body { animation: none !important; }
  .shimmer-name::after,
  .constellation-overlay *,
  .constellation-lines .path-two,
  .constellation-lines .path-four,
  .constellation-sparkles .sparkle,
  #countdown,
  #lock-countdown {
    animation: none !important;
  }
  .balloon { animation: none !important; }
  .velas {
    animation: none !important;
    transform: translate(-50%, 0) !important;
  }
  .fuego { animation: none !important; }
}
.balloon {
  animation: none !important;
}
/* Mobile-block overlay (desktop-only notice) */
.mobile-block {
  position: fixed; inset: 0; z-index: 9999;
  display: grid; place-items: center;
  background: linear-gradient(180deg, rgba(18,12,10,.72), rgba(18,12,10,.82));
  backdrop-filter: blur(6px) saturate(1.1);
}
.mobile-block[hidden] { display: none; }
.mobile-block__inner {
  max-width: 520px; width: calc(100% - 48px); padding: 22px; border-radius: 14px;
  background: linear-gradient(180deg, var(--beige-50), var(--beige-100));
  border: 1px solid rgba(185,69,69,.12); box-shadow: var(--shadow); text-align: center;
}
.mobile-block__title { margin: 0 0 8px; font-size: 20px; color: var(--pink-600); }
.mobile-block__desc { margin: 0 0 16px; color: var(--ink-soft); }
.mobile-block__actions { display:flex; gap: 10px; justify-content:center; }
@media (min-width: 768px) {
  .mobile-block { display: none !important; }
}
